define("enrol_gwpayments/module",["exports","core/ajax","core/notification"],(function(_exports,_ajax,_notification){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=void 0,_ajax=_interopRequireDefault(_ajax),_notification=_interopRequireDefault(_notification);const SELECTORS_input="#id_coupon",SELECTORS_action="#btncheckcoupon",performCheck=e=>{e.preventDefault();let el=document.querySelector(SELECTORS_input);if(null==el)return;let code=el.value;0!==code.length&&((couponCode,courseId,instanceId)=>{const request={methodname:"enrol_gwpayments_check_coupon",args:{couponcode:couponCode,courseid:courseId,instanceid:instanceId}};return _ajax.default.call([request])[0]})(code,el.dataset.courseid,el.dataset.instanceid).then((response=>{response.result?response.data.freepass?window.location.href=response.data.freepassredirect:(document.querySelector("#enrol-gwpayments-coupondiscount").innerHTML=response.data.html,document.querySelector("#enrol-gwpayments-coupondiscount").classList.remove("warning"),document.querySelector("#enrol-gwpayments-coupondiscount").classList.add("success"),document.querySelector("#enrol-gwpayments-basecost").classList.add("enrol-gwpayments-strike")):(document.querySelector("#enrol-gwpayments-coupondiscount").innerHTML=response.error,document.querySelector("#enrol-gwpayments-coupondiscount").classList.add("warning"),document.querySelector("#enrol-gwpayments-coupondiscount").classList.remove("success"),document.querySelector("#enrol-gwpayments-basecost").classList.remove("enrol-gwpayments-strike"))})).fail(_notification.default.exception)};_exports.init=()=>{document.querySelector(SELECTORS_input).addEventListener("blur",performCheck),document.querySelector(SELECTORS_action).addEventListener("click",performCheck)}}));

//# sourceMappingURL=module.min.js.map