{"version":3,"file":"findcourses.min.js","sources":["../src/findcourses.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Frameworks datasource.\n *\n * This module is compatible with core/form-autocomplete.\n *\n * @copyright  2019 R.J. van Dongen <rogier@sebsoft.nl>\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\nimport $ from 'jquery';\nimport Ajax from 'core/ajax';\nimport Notification from 'core/notification';\n\nexport default {\n\n    /**\n     * List users.\n     *\n     * @param {Object} options Additional parameters to pass to the external function.\n     * @return {Promise}\n     */\n    list: function(options) {\n        var promise,\n            args = {};\n\n        $.extend(args, typeof options === 'undefined' ? {} : options);\n        promise = Ajax.call([{\n            methodname: 'enrol_gwpayments_find_courses',\n            args: args\n        }])[0];\n\n        return promise.fail(Notification.exception);\n    },\n\n    /**\n     * Process the results for auto complete elements.\n     *\n     * @param {String} selector The selector of the auto complete element.\n     * @param {Array} results An array or results.\n     * @return {Array} New array of results.\n     */\n    processResults: function(selector, results) {\n        var options = [];\n        $.each(results, function(index, data) {\n            options.push({\n                value: data.id,\n                label: data.name\n            });\n        });\n        return options;\n    },\n\n    /**\n     * Source of data for Ajax element.\n     *\n     * @param {String} selector The selector of the auto complete element.\n     * @param {String} query The query string.\n     * @param {Function} callback A callback function receiving an array of results.\n     */\n    transport: function(selector, query, callback) {\n        this.list({\n            query: query\n        }).then(callback);\n    }\n};\n"],"names":["list","options","args","extend","Ajax","call","methodname","fail","Notification","exception","processResults","selector","results","each","index","data","push","value","id","label","name","transport","query","callback","then"],"mappings":";;;;;;;;kOA4Be,CAQXA,KAAM,SAASC,aAEPC,KAAO,0BAETC,OAAOD,UAAyB,IAAZD,QAA0B,GAAKA,SAC3CG,cAAKC,KAAK,CAAC,CACjBC,WAAY,gCACZJ,KAAMA,QACN,GAEWK,KAAKC,sBAAaC,YAUrCC,eAAgB,SAASC,SAAUC,aAC3BX,QAAU,0BACZY,KAAKD,SAAS,SAASE,MAAOC,MAC5Bd,QAAQe,KAAK,CACTC,MAAOF,KAAKG,GACZC,MAAOJ,KAAKK,UAGbnB,SAUXoB,UAAW,SAASV,SAAUW,MAAOC,eAC5BvB,KAAK,CACNsB,MAAOA,QACRE,KAAKD"}